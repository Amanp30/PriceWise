<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PriceWise - Smart Deal Calculator</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
  
  * {
    font-family: 'Inter', sans-serif;
  }
  
  body {
    background: #fafafa;
  }
  
  .input-minimal {
    transition: all 0.2s ease;
  }
  
  .input-minimal:focus {
    outline: none;
    border-color: #000;
  }
  
  .card-minimal {
    transition: all 0.3s ease;
  }
  
  .card-minimal:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 16px rgba(0,0,0,0.06);
  }
  
  .btn-minimal {
    transition: all 0.2s ease;
  }
  
  .btn-minimal:hover {
    transform: scale(1.01);
    background: #000;
  }
</style>
</head>
<body class="min-h-screen p-6 md:p-12">

<div class="max-w-5xl mx-auto">
  
  <!-- Header -->
  <div class="mb-12">
    <h1 class="text-4xl md:text-5xl font-light text-gray-900 mb-2">PriceWise</h1>
    <p class="text-gray-500 font-light">Calculate effective pricing</p>
  </div>

  <!-- Main Calculator -->
  <div class="bg-white rounded-lg border border-gray-200 p-8 md:p-10 mb-8">
    
    <!-- Prices Input -->
    <div class="mb-10">
      <label class="block text-sm font-medium text-gray-900 mb-3">Product Prices</label>
      <input 
        id="prices" 
        type="text" 
        class="w-full border border-gray-300 rounded px-4 py-3 text-gray-900 input-minimal" 
        placeholder="5000, 4000, 6000">
    </div>

    <div class="grid md:grid-cols-2 gap-8 mb-10">
      
      <!-- Discount -->
      <div>
        <h2 class="text-lg font-medium text-gray-900 mb-4">Discount</h2>
        
        <div class="mb-4">
          <select id="discountType" class="w-full border border-gray-300 rounded px-4 py-3 text-gray-900 input-minimal bg-white">
            <option value="none">No Discount</option>
            <option value="percent">Percentage</option>
            <option value="upto">Percentage (Capped)</option>
          </select>
        </div>
        
        <div id="discountInputsContainer" class="space-y-4"></div>
      </div>

      <!-- Cashback -->
      <div>
        <h2 class="text-lg font-medium text-gray-900 mb-4">Cashback</h2>
        
        <div class="mb-4">
          <select id="cashbackType" class="w-full border border-gray-300 rounded px-4 py-3 text-gray-900 input-minimal bg-white">
            <option value="none">No Cashback</option>
            <option value="fixed">Fixed Amount</option>
            <option value="percent">Percentage (Capped)</option>
          </select>
        </div>
        
        <div id="cashbackInputsContainer" class="space-y-4"></div>
      </div>
    </div>

    <!-- Calculate Button -->
    <button 
      onclick="calculateAll()" 
      class="w-full bg-gray-900 text-white font-medium py-4 rounded btn-minimal">
      Calculate
    </button>
  </div>

  <!-- View Toggle -->
  <div id="viewToggle" class="hidden mb-6 flex gap-2">
    <button onclick="switchView('cards')" id="cardsBtn" class="px-4 py-2 rounded bg-gray-900 text-white text-sm font-medium">Cards</button>
    <button onclick="switchView('table')" id="tableBtn" class="px-4 py-2 rounded bg-white border border-gray-300 text-gray-900 text-sm font-medium">Table</button>
  </div>

  <!-- Results Cards -->
  <div id="resultCards" class="grid grid-cols-1 md:grid-cols-2 gap-6"></div>

  <!-- Results Table -->
  <div id="resultTable" class="hidden bg-white rounded-lg border border-gray-200 overflow-hidden">
    <div class="overflow-x-auto">
      <table class="w-full">
        <thead class="bg-gray-50 border-b border-gray-200">
          <tr>
            <th class="px-6 py-3 text-left text-sm font-medium text-gray-900">Product</th>
            <th class="px-6 py-3 text-right text-sm font-medium text-gray-900">Original Price</th>
            <th class="px-6 py-3 text-right text-sm font-medium text-gray-900">Discount</th>
            <th class="px-6 py-3 text-right text-sm font-medium text-gray-900">Cashback</th>
            <th class="px-6 py-3 text-right text-sm font-medium text-gray-900">Final Payable</th>
            <th class="px-6 py-3 text-right text-sm font-medium text-gray-900">Effective Price</th>
            <th class="px-6 py-3 text-right text-sm font-medium text-gray-900">Total Savings</th>
          </tr>
        </thead>
        <tbody id="tableBody"></tbody>
      </table>
    </div>
  </div>
</div>

<script>
const discountType = document.getElementById('discountType');
const discountContainer = document.getElementById('discountInputsContainer');
const cashbackType = document.getElementById('cashbackType');
const cashbackContainer = document.getElementById('cashbackInputsContainer');

function renderDiscountInputs() {
  const type = discountType.value;
  discountContainer.innerHTML = '';
  
  if(type === 'percent') {
    discountContainer.innerHTML = `
      <div>
        <label class="block text-sm font-medium text-gray-900 mb-2">Discount Percentage</label>
        <div class="relative">
          <input id="discountPercent" type="number" class="w-full border border-gray-300 rounded px-4 py-3 pr-10 text-gray-900 input-minimal" placeholder="10" min="0" max="100">
          <span class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-500">%</span>
        </div>
      </div>`;
  } else if(type === 'upto') {
    discountContainer.innerHTML = `
      <div>
        <label class="block text-sm font-medium text-gray-900 mb-2">Discount Percentage</label>
        <div class="relative">
          <input id="discountPercent" type="number" class="w-full border border-gray-300 rounded px-4 py-3 pr-10 text-gray-900 input-minimal" placeholder="10" min="0" max="100">
          <span class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-500">%</span>
        </div>
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-900 mb-2">Maximum Discount</label>
        <div class="relative">
          <span class="absolute left-4 top-1/2 -translate-y-1/2 text-gray-500">₹</span>
          <input id="discountMax" type="number" class="w-full border border-gray-300 rounded px-4 py-3 pl-8 text-gray-900 input-minimal" placeholder="300" min="0">
        </div>
      </div>`;
  }
}

function renderCashbackInputs() {
  const type = cashbackType.value;
  cashbackContainer.innerHTML = '';
  
  if(type === 'fixed') {
    cashbackContainer.innerHTML = `
      <div>
        <label class="block text-sm font-medium text-gray-900 mb-2">Cashback Amount</label>
        <div class="relative">
          <span class="absolute left-4 top-1/2 -translate-y-1/2 text-gray-500">₹</span>
          <input id="fixedCashback" type="number" class="w-full border border-gray-300 rounded px-4 py-3 pl-8 text-gray-900 input-minimal" placeholder="100" min="0">
        </div>
      </div>`;
  } else if(type === 'percent') {
    cashbackContainer.innerHTML = `
      <div>
        <label class="block text-sm font-medium text-gray-900 mb-2">Cashback Percentage</label>
        <div class="relative">
          <input id="cashbackPercent" type="number" class="w-full border border-gray-300 rounded px-4 py-3 pr-10 text-gray-900 input-minimal" placeholder="5" min="0" max="100">
          <span class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-500">%</span>
        </div>
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-900 mb-2">Maximum Cashback</label>
        <div class="relative">
          <span class="absolute left-4 top-1/2 -translate-y-1/2 text-gray-500">₹</span>
          <input id="cashbackMax" type="number" class="w-full border border-gray-300 rounded px-4 py-3 pl-8 text-gray-900 input-minimal" placeholder="300" min="0">
        </div>
      </div>`;
  }
}

discountType.addEventListener('change', renderDiscountInputs);
cashbackType.addEventListener('change', renderCashbackInputs);

function calculatePrice(price) {
  price = parseFloat(price);
  if(!price || price <= 0) return null;

  let discountAmount = 0, priceAfterDiscount = price, cashbackAmount = 0;

  const dType = discountType.value;
  if(dType !== 'none') {
    const dPercent = parseFloat(document.getElementById('discountPercent')?.value) || 0;
    discountAmount = price * (dPercent/100);
    if(dType === 'upto') {
      const dMax = parseFloat(document.getElementById('discountMax')?.value) || 0;
      if(discountAmount > dMax) discountAmount = dMax;
    }
    priceAfterDiscount = price - discountAmount;
  }

  const cType = cashbackType.value;
  if(cType === 'fixed') {
    cashbackAmount = parseFloat(document.getElementById('fixedCashback')?.value) || 0;
  } else if(cType === 'percent') {
    const cPercent = parseFloat(document.getElementById('cashbackPercent')?.value) || 0;
    cashbackAmount = priceAfterDiscount * (cPercent/100);
    const cMax = parseFloat(document.getElementById('cashbackMax')?.value) || 0;
    if(cashbackAmount > cMax) cashbackAmount = cMax;
  }

  const finalPayable = priceAfterDiscount;
  const effectivePrice = priceAfterDiscount - cashbackAmount;
  const totalSavings = price - effectivePrice;
  const savingsPercent = price > 0 ? ((totalSavings / price) * 100) : 0;

  return { price, discountAmount, priceAfterDiscount, cashbackAmount, finalPayable, effectivePrice, totalSavings, savingsPercent };
}

function calculateAll() {
  const priceText = document.getElementById('prices').value;
  const prices = priceText.split(',').map(p=>p.trim()).filter(p=>p);
  const container = document.getElementById('resultCards');
  const tableBody = document.getElementById('tableBody');
  const viewToggle = document.getElementById('viewToggle');
  
  container.innerHTML = '';
  tableBody.innerHTML = '';

  if(prices.length === 0) {
    viewToggle.classList.add('hidden');
    return;
  }

  viewToggle.classList.remove('hidden');
  const results = [];

  prices.forEach((p, index) => {
    const res = calculatePrice(p);
    if(res) {
      results.push(res);
      
      // Card View
      const card = document.createElement('div');
      card.className = 'bg-white rounded-lg border border-gray-200 p-6 card-minimal';
      card.innerHTML = `
        <div class="mb-6">
          <div class="text-sm text-gray-500 mb-1">Product ${index + 1}</div>
          <div class="text-3xl font-light text-gray-900">₹${res.price.toLocaleString('en-IN', {maximumFractionDigits: 0})}</div>
        </div>
        
        <div class="space-y-3 mb-6">
          ${res.discountAmount > 0 ? `
          <div class="flex justify-between text-sm">
            <span class="text-gray-600">Discount</span>
            <span class="text-gray-900">−₹${res.discountAmount.toLocaleString('en-IN', {maximumFractionDigits: 0})}</span>
          </div>
          ` : ''}
          
          ${res.cashbackAmount > 0 ? `
          <div class="flex justify-between text-sm">
            <span class="text-gray-600">Cashback</span>
            <span class="text-gray-900">−₹${res.cashbackAmount.toLocaleString('en-IN', {maximumFractionDigits: 0})}</span>
          </div>
          ` : ''}
        </div>
        
        <div class="border-t border-gray-200 pt-4 space-y-3">
          <div class="flex justify-between">
            <span class="text-sm text-gray-600">Final Payable</span>
            <span class="text-lg font-medium text-gray-900">₹${res.finalPayable.toLocaleString('en-IN', {maximumFractionDigits: 0})}</span>
          </div>
          <div class="flex justify-between">
            <span class="text-sm text-gray-600">Effective Price</span>
            <span class="text-lg font-medium text-gray-900">₹${res.effectivePrice.toLocaleString('en-IN', {maximumFractionDigits: 0})}</span>
          </div>
          ${res.totalSavings > 0 ? `
          <div class="flex justify-between pt-2 border-t border-gray-100">
            <span class="text-sm text-gray-500">You Save</span>
            <span class="text-sm font-medium text-gray-900">₹${res.totalSavings.toLocaleString('en-IN', {maximumFractionDigits: 0})} (${res.savingsPercent.toFixed(1)}%)</span>
          </div>
          ` : ''}
        </div>
      `;
      container.appendChild(card);

      // Table Row
      const row = document.createElement('tr');
      row.className = 'border-b border-gray-200 hover:bg-gray-50';
      row.innerHTML = `
        <td class="px-6 py-4 text-sm text-gray-900">Product ${index + 1}</td>
        <td class="px-6 py-4 text-sm text-gray-900 text-right">₹${res.price.toLocaleString('en-IN', {maximumFractionDigits: 0})}</td>
        <td class="px-6 py-4 text-sm text-gray-900 text-right">${res.discountAmount > 0 ? '−₹' + res.discountAmount.toLocaleString('en-IN', {maximumFractionDigits: 0}) : '—'}</td>
        <td class="px-6 py-4 text-sm text-gray-900 text-right">${res.cashbackAmount > 0 ? '−₹' + res.cashbackAmount.toLocaleString('en-IN', {maximumFractionDigits: 0}) : '—'}</td>
        <td class="px-6 py-4 text-sm font-medium text-gray-900 text-right">₹${res.finalPayable.toLocaleString('en-IN', {maximumFractionDigits: 0})}</td>
        <td class="px-6 py-4 text-sm font-medium text-gray-900 text-right">₹${res.effectivePrice.toLocaleString('en-IN', {maximumFractionDigits: 0})}</td>
        <td class="px-6 py-4 text-sm text-gray-900 text-right">${res.totalSavings > 0 ? '₹' + res.totalSavings.toLocaleString('en-IN', {maximumFractionDigits: 0}) + ' (' + res.savingsPercent.toFixed(1) + '%)' : '—'}</td>
      `;
      tableBody.appendChild(row);
    }
  });
}

let currentView = 'cards';

function switchView(view) {
  currentView = view;
  const cardsContainer = document.getElementById('resultCards');
  const tableContainer = document.getElementById('resultTable');
  const cardsBtn = document.getElementById('cardsBtn');
  const tableBtn = document.getElementById('tableBtn');

  if(view === 'cards') {
    cardsContainer.classList.remove('hidden');
    tableContainer.classList.add('hidden');
    cardsBtn.classList.add('bg-gray-900', 'text-white');
    cardsBtn.classList.remove('bg-white', 'border', 'border-gray-300', 'text-gray-900');
    tableBtn.classList.remove('bg-gray-900', 'text-white');
    tableBtn.classList.add('bg-white', 'border', 'border-gray-300', 'text-gray-900');
  } else {
    cardsContainer.classList.add('hidden');
    tableContainer.classList.remove('hidden');
    tableBtn.classList.add('bg-gray-900', 'text-white');
    tableBtn.classList.remove('bg-white', 'border', 'border-gray-300', 'text-gray-900');
    cardsBtn.classList.remove('bg-gray-900', 'text-white');
    cardsBtn.classList.add('bg-white', 'border', 'border-gray-300', 'text-gray-900');
  }
}
</script>
</body>
</html>
